local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local player = Players.LocalPlayer

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- 1. LOAD WINDUI LIBRARY (Fix URL dan Error Handling)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local WindUI = nil
local success, result = pcall(function()
    -- Menggunakan URL WindUI yang lebih stabil
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/Green-Scripts/UI-Libraries/main/WindUI/main.lua"))()
end)

if success and type(result) == "table" and result.CreateWindow then
    WindUI = result
else
    -- Jika gagal memuat, kita tampilkan notifikasi sederhana (jika memungkinkan)
    -- atau cetak error ke konsol.
    warn("âŒ Gagal memuat WindUI Library: " .. tostring(result))
    return -- Hentikan eksekusi jika library UI tidak dapat dimuat.
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  GLOBAL VARIABLES (TIDAK BERUBAH)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local carryAnimationEnabled = false
local carryWeldActive = false
local blackScreenEnabled = false
local blackScreenGui = nil
local fpsBoostEnabled = false
local megangCoilEnabled = false
local noclipEnabled = false

local stableAnimationEnabled = true
local animationFadeTime = 0.1
local jumpAnimationFadeTime = 0.25
local animationPriority = Enum.AnimationPriority.Action

local frameRateLimit = 30
local optimizedRendering = true
local reducedEffects = false

local antiReportEnabled = false
local antiDetectEnabled = false
local privateModeEnabled = false
local autoLeaveAdminEnabled = false
local adminNames = {"Admin", "Moderator", "Owner", "Developer", "Staff"}
local stealthConnection = nil

_G.LoopCounter = 0
_G.ShouldAutoRestart = false
_G.RestartWithLoop = false
_G.IsPlaying = false

-- (Semua fungsi utilitas WeldRightArmForward, ToggleCarryAnimation, CreateBlackScreen, 
-- EnableAntiReport, EnableFPSBoost, dsb. TIDAK SAYA UBAH di sini karena terlalu panjang. 
-- Asumsi fungsi-fungsi tersebut sudah benar dari kode Anda sebelumnya.)
-- JANGAN HAPUS FUNGSI-FUNGSI ITU DARI SKRIP UTUH ANDA!

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  PLAYBACK PLAYER MODULE (TIDAK BERUBAH)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local PlaybackPlayer = {}
PlaybackPlayer.__index = PlaybackPlayer
-- (Semua fungsi PlaybackPlayer.new, LoadRecording, PlayRecording, PausePlayback, 
-- dsb. TIDAK SAYA UBAH di sini. Asumsi modul ini sudah benar.)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  PLAYER INITIALIZATION (DIPERBAIKI)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local playbackPlayer
local isLoopEnabled = false

local function initPlayer()
    local char = player.Character or player.CharacterAdded:Wait()
    -- Pastikan inisialisasi PlaybackPlayer hanya terjadi sekali
    if not playbackPlayer then
        playbackPlayer = PlaybackPlayer.new(char)
    else
        playbackPlayer:RebindCharacter(char)
    end
    return playbackPlayer ~= nil
end

-- Panggil initPlayer di task.spawn untuk mencegah pemblokiran
task.spawn(function()
    local successInit, char = pcall(function()
        return player.Character or player.CharacterAdded:Wait()
    end)
    
    if successInit and char then
        initPlayer()
    end
end)

player.CharacterAdded:Connect(function(newChar)
    task.spawn(function()
        newChar:WaitForChild("HumanoidRootPart", 10)
        initPlayer()
        -- (Kode Re-apply features) ...
        -- (Kode Auto-restart) ...
    end)
end)

RunService.Stepped:Connect(function()
    -- (Kode Noclip) ...
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- 2. WINDUI CREATE WINDOW (Titik Krusial UI)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Window = WindUI:CreateWindow({
    Title = "Pler Kuda",
    Icon = "https://cdn.discordapp.com/avatars/1427542794670444544/2b394531afe20d3a14eda2b83d53e510.png?size=4096",
    Author = "PlerKuda",
    Folder = "AutoWalkPlayer",
    
    OpenButton = {
        Title = "Plerkuda",
        Icon = "https://cdn.discordapp.com/avatars/1427542794670444544/2b394531afe20d3a14eda2b83d53e510.png?size=4096",
        CornerRadius = UDim.new(0, 8),
        StrokeThickness = 2,
        Enabled = true,
        Draggable = true,
        OnlyMobile = false,
        
        Color = ColorSequence.new(
            Color3.fromHex("#6366f1"), 
            Color3.fromHex("#8b5cf6")
        )
    }
})

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  FLOATING TOGGLE FRAME (TIDAK BERUBAH)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local FloatingToggleGui
-- (Fungsi CreateFloatingToggle TIDAK SAYA UBAH)
FloatingToggleGui = CreateFloatingToggle()

Window:Tag({
    Title = "v3.0 Enhanced",
    Color = Color3.fromHex("#6366f1")
})

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  MOUNTAIN LOADING FUNCTION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- â­ EDITING RAW GITHUB: Tambahkan atau hapus mode/checkpoint di sini.
local MountainList = {
    {
        Title = "â›°ï¸ Yahayuk (CP 1-5)",
        Icon  = "mountain",
        URLs  = {
            "https://raw.githubusercontent.com/VannDC/Tes/refs/heads/main/yahayuk/checkpoint_1.json",
            "https://raw.githubusercontent.com/VannDC/Tes/refs/heads/main/yahayuk/checkpoint_2.json",
            "https://raw.githubusercontent.com/VannDC/Tes/refs/heads/main/yahayuk/checkpoint_3.json",
            "https://raw.githubusercontent.com/VannDC/Tes/refs/heads/main/yahayuk/checkpoint_4.json",
            "https://raw.githubusercontent.com/VannDC/Tes/refs/heads/main/yahayuk/checkpoint_5.json",
        }
    },
    {
        Title = "ğŸŒ mapkedua (Single)",
        Icon  = "globe",
        URLs  = {
            "https://raw.githubusercontent.com/VannDC/Uploads/main/Walk_Replays.json"
        }
    }
}
-- â­ END EDITING RAW GITHUB

local SelectedMountain = MountainList[1]
local IsLoading = false

-- (Fungsi LoadMountain TIDAK SAYA UBAH)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  UI SECTIONS DAN TABS (TIDAK BERUBAH)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local MainSection = Window:Section({ Title = "Main", Icon = "home", })
-- (Semua UI Section, Tabs, Toggles, Buttons, dsb. TIDAK SAYA UBAH)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  AUTO LOAD INITIALIZATION (DIPERBAIKI)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Panggil LoadMountain pertama kali saat script dijalankan (Auto Load default)
task.spawn(function()
    -- Tunggu hingga player dan UI siap
    local char = player.Character or player.CharacterAdded:Wait()
    initPlayer()
    task.wait(0.5) 
    
    if SelectedMountain then
        LoadMountain(SelectedMountain.Title, SelectedMountain.URLs)
    end
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--  FINAL INITIALIZATION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WindUI:Notify({
    Title = "ğŸš€ Auto Walk V3.0 Enhanced",
    Content = "âœ… Script loaded successfully!\nğŸ­ Stable Animation: ENABLED\nâœ¨ Auto Load aktif!",
    Icon = "check",
    Duration = 5,
})

task.wait(1)

WindUI:Notify({
    Title = "ğŸ’¡ Kontrol Cepat",
    Content = "Gunakan **Floating Controls** di layar untuk Play, Pause, dan Stop!",
    Icon = "move",
    Duration = 4,
})